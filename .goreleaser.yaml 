project_name: autohost

release:
  draft: false
  # Marca autom√°ticamente prerelease si el tag contiene -rc, -beta, etc.
  prerelease: auto

builds:
  - id: autohost
    main: ./cmd/autohost
    env:
      - CGO_ENABLED=0
    goos:
      - linux
      - darwin
    goarch:
      - amd64
      - arm64
    ldflags:
      - -s -w
      - -X main.version={{.Version}}
      - -X main.commit={{.ShortCommit}}
      - -X main.date={{.Date}}
    # opcional: reproducible
    mod_timestamp: '{{ .CommitDate }}'
    flags:
      - -trimpath
    # desactiva archives: queremos binario plano
    binary: autohost

# Publicar binarios planos con este nombre exacto: autohost-${os}-${arch}
archives:
  - id: skip_archives
    builds: [autohost]
    format: binary
    name_template: "{{ .Binary }}-{{ .Os }}-{{ .Arch }}"
    # sin archivos extra; es binario plano

checksum:
  name_template: "checksums_{{ .Version }}.txt"

changelog:
  sort: asc
  filters:
    exclude:
      - '^docs?:'
      - '^chore:'
      - '^test:'
